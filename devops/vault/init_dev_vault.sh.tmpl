#!/bin/sh
vault login -address="${VAULT_HOST}:${VAULT_PORT}" token=${VAULT_TOKEN}

vault auth enable -address="${VAULT_HOST}:${VAULT_PORT}" userpass
vault secrets enable -address="${VAULT_HOST}:${VAULT_PORT}" transit
vault secrets enable -address="${VAULT_HOST}:${VAULT_PORT}" -path=secret kv-v2

vault policy write -address="${VAULT_HOST}:${VAULT_PORT}"  user ${VAULT_USER_POLICY}
vault write -address="${VAULT_HOST}:${VAULT_PORT}" auth/userpass/users/${VAULT_USER} password=${VAULT_PASSWORD} policies=user
vault write -address="${VAULT_HOST}:${VAULT_PORT}"  -f transit/keys/passwords
vault write -address="${VAULT_HOST}:${VAULT_PORT}"  -f transit/keys/logs
vault write -address="${VAULT_HOST}:${VAULT_PORT}"  -f transit/keys/scripts
